{
  "version": 8,
	"cmakeMinimumRequired": {
    "major": 4,
    "minor": 2,
    "patch": 0
  },
  "configurePresets": [
		{
			"name": "common",
			"hidden": true,
			"cacheVariables":{
				"CMAKE_CXX_STANDARD": "23",
				"JDE_VERSION": "2025.11.01",
				"MIN_REQ_CMAKE_VERSION": "3.28.3"
			}
		},
		{
			"name": "win-clang",
			"inherits": "common",
			"environment": {
				"CC": "clang-cl.exe",
				"CXX": "clang++.exe",
				"LIB_ROOT": "$env{REPO_DIR}/install/clang"
			},
			"cacheVariables":{
				"CMAKE_BINARY_DIR": "$env(JDE_DIR)/bin/$env{BUILD_TYPE}",
				"CMAKE_BUILD_TYPE": "$env{BUILD_TYPE}",
				"CMAKE_CXX_COMPILER": "clang++.exe",
				"CMAKE_C_COMPILER": "clang-cl.exe",
				"CMAKE_PREFIX_PATH": "$env{LIB_ROOT}/$env{BUILD_TYPE}",
				"CMAKE_CXX_FLAGS": "-stdlib=libc++",
				"CMAKE_CXX_FLAGS_DEBUG": "-gcodeview -O0 -fsanitize=address",
				"CMAKE_EXE_LINKER_FLAGS": "-stdlib=libc++",
				"LIB_DIR": "$env{LIB_ROOT}/$env{BUILD_TYPE}",
				"Boost_USE_STATIC_LIBS": false
			}
		},
		{
			"name": "win-clang-relWithDebInfo",
			"inherits": ["win-clang", "relWithDebInfo"],
			"environment": {
				"OPTIMIZATION_LEVEL": "O3"
			},
			"cacheVariables": {
				"CMAKE_INSTALL_PREFIX": "$env{LIB_ROOT}/$env{BUILD_TYPE}"
			}
		},
		{
			"name": "win-msvc",
			"inherits": "common",
			"environment": {
			},
			"cacheVariables":{
				"Boost_USE_STATIC_LIBS": false,
				"OPENSSL_ROOT_DIR": "$env{OPENSSL_ROOT_DIR}",
				"LIB_DIR": "$env{REPO_DIR}/install/msvc",
				"CMAKE_CXX_COMPILER": "cl.exe",
				"CMAKE_MSVC_RUNTIME_LIBRARY": "MultiThreaded$<$<CONFIG:Debug>:Debug>DLL",
				"CMAKE_CXX_FLAGS": "/EHsc /Zc:preprocessor /utf-8 /DSPDLOG_FMT_EXTERNAL /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_CXX17_ALLOCATOR_VOID_DEPRECATION_WARNING /D_SILENCE_ALL_CXX23_DEPRECATION_WARNINGS /TP /D_WIN32_WINNT=0x0601 /DNOMINMAX /DWIN32_LEAN_AND_MEAN /DPUBLIC /W4 /wd4068 /wd4251 /wd4275 /wd4297 /wd4456 /wd4652 /wd5104 /wd5105",
				"CMAKE_CXX_FLAGS_RELEASE": "/O2 /Zi /DNDEBUG",
				"CMAKE_CXX_FLAGS_DEBUG": "/Od /Zi /D_DEBUG /JMC /fsanitize=address",
				"CMAKE_EXE_LINKER_FLAGS": "/INCREMENTAL:NO /IGNORE:4099",
				"CMAKE_SHARED_LINKER_FLAGS_DEBUG": "/DEBUG /INCREMENTAL:NO",
				"CMAKE_PREFIX_PATH": "$env{REPO_DIR}/install/msvc",
				"CMAKE_INSTALL_PREFIX": "$env{REPO_DIR}/install/msvc/$env{BUILD_TYPE}"
			}
		},
		{
			"name": "win-msvc-repo-relWithDebInfo",
			"inherits": "win-msvc",
			"cacheVariables":{
				"CMAKE_PREFIX_PATH": "$env{REPO_DIR}/install/msvc/RelWithDebInfo",
				"CMAKE_INSTALL_PREFIX": "$env{REPO_DIR}/install/msvc/RelWithDebInfo"
			}
		},
		{
			"name": "win-msvc-jde",
			"inherits": "win-msvc",
			"cacheVariables":{
				"JSONNET_LIB_DIR": "$env{REPO_DIR}/jsonnet/vs2017/x64/$<$<CONFIG:Debug>:Debug>$<$<CONFIG:RelWithDebInfo>:Release>"
			}
		},
		{
			"name": "relWithDebInfo",
			"hidden": true,
			"environment":{
				"BUILD_TYPE": "RelWithDebInfo"
			}
		},
		{
			"name": "linux",
			"hidden": true,
			"inherits": "common",
			"environment": {
				"CC": "gcc-14",
				"CXX": "g++-14",
				"LIB_ROOT": "$env{REPO_DIR}/install/$env{CXX}"
			},
			"cacheVariables":{
				"CMAKE_BINARY_DIR": "$env(JDE_DIR)/bin/$env{BUILD_TYPE}",
				"CMAKE_BUILD_TYPE": "$env{BUILD_TYPE}",
				"CMAKE_CXX_COMPILER": "g++-14",
				"CMAKE_C_COMPILER": "gcc-14",
				"CMAKE_PREFIX_PATH": "$env{LIB_ROOT}/$env{BUILD_TYPE}",
				"LIB_DIR": "$env{LIB_ROOT}/$env{BUILD_TYPE}",
				"CMAKE_CXX_FLAGS_DEBUG": "-ggdb -fsanitize=address -fsanitize=leak -fno-omit-frame-pointer -D_GLIBCXX_DEBUG=ON -static-libstdc++ -static-libasan -lrt"
			}
		},
    {
      "name": "linux-relWithDebInfo",
			"inherits": ["linux", "relWithDebInfo"]
    },
		{
			"name": "linux-jde",
			"hidden": true,
			"inherits": ["linux"],
			"cacheVariables": {
				"Boost_USE_STATIC_LIBS": false,
				"BOOST_VERSION": "1.88.0",
				"EXCLUDED_WARNINGS": "-Wno-unknown-pragmas;-Wno-missing-field-initializers;-Wno-changes-meaning"
			}
		},
		{
			"name": "linux-jde-relWithDebInfo",
			"inherits": ["linux-jde","relWithDebInfo"],
			"environment": {
				"OPTIMIZATION_LEVEL": "O3"
			},
			"cacheVariables": {
				"CMAKE_INSTALL_PREFIX": "$env{LIB_ROOT}/$env{BUILD_TYPE}"
			}
		}
  ]
}