function(boost)
	# message( LIB_ROOT=$ENV{LIB_ROOT} )
	# message( BUILD_TYPE=$ENV{BUILD_TYPE} )
	# message( Boost_INCLUDE_DIR=${LIB_ROOT}/boost/include)
	# message( CMAKE_PREFIX_PATH=${CMAKE_PREFIX_PATH} )
	if( WIN32 )
		set( Boost_NO_WARN_NEW_VERSIONS ON )

		#set( Boost_INCLUDE_DIR ${LIB_ROOT}/boost/include/boost-1_88 CACHE STRING "Boost library path" )
		#set( BOOST_LIBRARYDIR ${LIB_ROOT}/boost/lib CACHE STRING "Boost library path" )
		find_package( Boost ${BOOST_VERSION} REQUIRED COMPONENTS json )
	else()
		find_package( Boost ${BOOST_VERSION} REQUIRED COMPONENTS json )
	endif()

	include_directories( ${Boost_INCLUDE_DIRS} )
	#message( Boost_INCLUDE_DIRS=${Boost_INCLUDE_DIRS} )
endfunction()

function(dumpVariables)
	get_cmake_property(_variableNames VARIABLES)
	list (SORT _variableNames)
	foreach (_variableName ${_variableNames})
#        if ((NOT DEFINED ${ARGV0}) OR _variableName MATCHES ${ARGV0})
					message(STATUS "${_variableName}=${${_variableName}}")
#        endif()
	endforeach()
endfunction()

if( WIN32 )
	function( copyLibDlls )
		set( buildLibDir $ENV{JDE_BUILD_DIR}/msvc/jde/libs )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${buildLibDir}/fwk/lib/$<CONFIG>/Jde.dll" $<TARGET_FILE_DIR:${targetName}> )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${buildLibDir}/fwk/lib/$<CONFIG>/Jde.pdb" $<TARGET_FILE_DIR:${targetName}> )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${LIB_DIR}/fmt/bin/fmtd.dll" $<TARGET_FILE_DIR:${targetName}>  COMMENT "fmtd.dll" )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${LIB_DIR}/zlib/bin/zlibd.dll" $<TARGET_FILE_DIR:${targetName}> COMMENT "copy zlibd.dll" )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${LIB_DIR}/fmt/bin/fmt.dll" $<TARGET_FILE_DIR:${targetName}>  COMMENT "fmt.dll" )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${LIB_DIR}/zlib/bin/zlib.dll" $<TARGET_FILE_DIR:${targetName}> COMMENT "copy zlib.dll" )
	endfunction()
	function( copyCommonDlls )
		copyLibDlls()
		set( buildLibDir $ENV{JDE_BUILD_DIR}/msvc/jde/libs )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${buildLibDir}/db/lib/$<CONFIG>/Jde.DB.dll" $<TARGET_FILE_DIR:${targetName}> )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${buildLibDir}/db/lib/$<CONFIG>/Jde.DB.pdb" $<TARGET_FILE_DIR:${targetName}> )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${buildLibDir}/db/drivers/odbc/$<CONFIG>/Jde.DB.Odbc.dll" $<TARGET_FILE_DIR:${targetName}> )
		add_custom_command( TARGET ${targetName} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${buildLibDir}/db/drivers/odbc/$<CONFIG>/Jde.DB.Odbc.pdb" $<TARGET_FILE_DIR:${targetName}> )
	endfunction()
endif()

function(compileOptions)
	if (MSVC)
		target_compile_options( ${ARGV0} PRIVATE /Zc:preprocessor /utf-8 /W4 /wd4068 /wd4251 /wd4275 /wd4297 /wd4456 /wd4652 /wd5104 /wd5105 )
		add_definitions( -D_WIN32_WINNT=0x0601 -DNOMINMAX -DWIN32_LEAN_AND_MEAN -DPUBLIC -DSPDLOG_FMT_EXTERNAL )
	else()
		target_compile_options( ${ARGV0} PRIVATE -Wall -Wextra -pedantic -Werror ${EXCLUDED_WARNINGS} )
		if( NOT $ENV{OPTIMIZATION_LEVEL} STREQUAL "" )
			target_compile_options( ${ARGV0} PRIVATE -$ENV{OPTIMIZATION_LEVEL} )
		endif()
		set_property( TARGET ${ARGV0} PROPERTY POSITION_INDEPENDENT_CODE ON )
		get_property(TARGET_COMPILE_OPTIONS TARGET ${ARGV0} PROPERTY COMPILE_OPTIONS)
		message( TARGET_COMPILE_OPTIONS=${TARGET_COMPILE_OPTIONS} )
	endif()
endfunction()